


TODO in Channel:

	[] move some orthodox stuff (copy constructor and operator=) to private  
	   // Real-world IRC channel objects are usually non-copyable ‚Äî prevents accidental copies  

	REPLACE:  
		[] std::vector<Client*> _members;  
		   => std::map<int, Client*> _members;  
		   // Faster lookup by fd, avoids duplicates, standard for server-side user tracking  

		[] std::vector<Client*> _operators;  
		   => std::set<int> _operators;  
		   // Store only fds of operators, no need to store full Client* here  

		[] removeUser(Client* client)  
		   => void removeUser(int fd);  
		   // Server works with fd ‚Äî avoid searching by pointer  

		[] void sendToChannelExcept(const std::string &message, Client *sender) const;  
		   => void broadcast(const std::string &message, int excludeFd) const;  
		   // Simpler to exclude sender by fd, members stored by fd  

	CHANGE:  
		[] Remove either _key or _password ‚Äî only one field for channel key should exist (suggest: keep _key)  
		   // Subject requires "key" for +k mode ‚Äî no need for both  

	ADD:  
		[] std::set<int> _invited;  
		   // Store fds of invited clients for invite-only channels (+i)  

		[] void inviteUser(int fd);  
		   // Add client to invited list  

		[] bool isInvited(int fd) const;  
		   // Check if client is invited  

		[] bool _inviteOnly;      // +i ‚Äî invite-only channel  
		[] bool _topicLocked;     // +t ‚Äî only operators can change topic  
		[] bool _hasKey;          // +k ‚Äî key/password is set  
		[] bool _hasUserLimit;    // +l ‚Äî user limit active  

		[] bool isInviteOnly() const;  
		[] bool isTopicLocked() const;  
		[] bool hasKey() const;  
		[] bool hasUserLimit() const;  
		   // Simple getters to check channel modes ‚Äî server uses these  
//____________________________________________________________________________//



TODO SERVER/ CLIENT/ CHANNEL /ELSE:

17.07

BRUNCh: fix/channel-name-validation 
server.cpp
	 changed logic to check is channel name

join.cpp:
	separated join  to join.cpp form commandsChannel.cpp for easier work with test/refactoring
	Fixed is channel name + added new numeric reply
			 join a
			:ircserv 476 n a :Bad Channel Mask

			ServerüéüÔ∏èü§ñ: Received command from client fd 4: join a


replies.cpp:
	add: replyErr476BadChanMask for an invalid channel name

utils.cpp
	updated welcome message


TESTCASES:
	[]JOIN 1 
		must: JOIN 1
				:ircserv 476 testuser 1 :Invalid channel name


16.07:


	Branch "feature/shutdown-cleanup"
	add:
		DESTRUCTORS update in client and chaneel.
		add full cleaning in server destructor
			Client* c = new Client(...)	delete c somewhere (usually in shutdown or destructor)
			int fd = socket(...)	close(fd)
			fcntl(fd, F_SETFL, ...)	close(fd) when done
			std::map<int, Client*>	loop and delete all pointers
			std::map<std::string, Channel*>	same ‚Äî delete channels
	Channel:
	/*
	disabled copy constructor, operator=
		Copying and assignment are disabled for this class.
		IRC objects must be unique and should never be copied.

	[]segm fold by JOIN
SERVER:
	removeClinetFromALLChannels():
		add NULL check
		used copy instead original

Branch: refactor/commands-loggs
	-movved logs from classes to utils.cpp to use it in functions outside classes

	Client: deleted <<operator in Server
	- moved commands.cpp(from /src to /cmd)
	-renamed /commands/commands.cpp to /commands/commandsChannel.cpp
	- deleted empty files for commands
	- added  class Channel; to  commands.hpp
	- organized commands.hpp
	- added loginfo to server for registering client
	- 
	- 

Branch "fix/segfault-join"
 handleJoin():
		- added  after all numeric replies "return;"
		- added get the just-created channel. Chanell was NUll(segmfault)
		if(!channel){
			server.addChannel(channelName, client); 
			logChannelInfo( "Channel " + channelName +" created by " + client.getNickname());
			channel = server.getChannel(channelName); // Alena: added get the just-created channel
		}
		-added operator=first user:
		//  first user becomes operator
		channel->addOperator(client.getFd());
		logChannelInfo("User " + client.getNickname() + " granted operator status.");
		-added additional check:
				//  check in case if smth goes wrong
				if (!channel)
				{
					logChannelError("JOIN failed: could not get channel " + channelName);
					return;
				}
		- client.joinChannel(channel); //  add channel to client's list
		-fixef rejectin privmsg, because user was added 2 times in channel(Channel(name, creator) + channel->addUser(...);)
		- fixed adding same client two times with: if (!channel->hasMembers(&client))

BRANCH:		fix/channel-commands

		1. PROBLEM:
			
		  	[] nc -C 127.0.0.1 6667
			PASS p
			JOIN a

			
			BUT server accept not registered client!
				ServerüéüÔ∏èü§ñ: New client connected on fd 4 (127.0.0.1)
				ServerüéüÔ∏èü§ñ: Received command from client fd 4: PASS p
				ServerüéüÔ∏èü§ñ: Received command from client fd 4: JOIN a
				Channelüé™üí¨: Client added to channel: 
				ServerüéüÔ∏èü§ñ: Created channel a by user 
				Channelüé™üí¨: Channel a created by 
				Channelüé™üí¨: Client added as operator: 4
				Channelüé™üí¨: User  is  operator(creates channel).
				Channelüé™üí¨: User already in channel
		2.PROBLEM : user addd 2 times => problem in Channel:handleJoin()
				User already in channel

		3.Problem. In server teminal: ctrlC, but Client terminal is wrking!

		[X]4.problem:
		server closed, but client not:(
			 nc -C 127.0.0.1 6667
			NOTICE * : Server is shutting down now			//The fd was closed successfully by your server. 
			clear
			nc: write failed (0/2): Broken pipe
		FIX: not a problem: =>
			nc: write failed (0/2): Broken pipe
			=> that confirms the socket is fully closed on the server side
			nc is a simple line-based client ‚Äî it doesn‚Äôt auto-quit on EOF unless it receives nothing.
			You cannot force nc to quit remotely (only close the connection).

commandsChannel.cpp
	add:
		-check if not registered user=> dont allow join channel

registration.cpp:
	updated loServerinfo for welcome message

Client:
add: function for get prefix + _nickname + "!" + _username + "@" + _host;



15.07
Branch: "feature/signal-handling"
- handle SIGINT (Ctrl-C): clean up + shut down
- ignore SIGPIPE to prevent crash on writing to disconnected clients.
Global shutdown flag or Server pointer 
- handle_sigint() 

-signal(SIGINT, ...)

-signal(SIGPIPE, SIG_IGN)

Update Server::run() to respect shutdown
void Server::shutdown();  // Close all client sockets, set _running = false
Server:
add:
	bool _runningMainLoop for main loop
changed:
	RUN():
		main loop in run(0 for handling signals)
		moved incrementng logik pollFdIndex++  from handleClientInput()
handleClientInput():
	pollFdIndex++ removed from function . Logic in one place = >inside run, not this functio
[]Add handle signals*ctrl+c, ctrl+D
[]change logik for in handle client input(move out pollfd)
	



14.07
Brunch: feature/quit
 add:
	quit()

Branch: "fix/registration-order" 	
	registration.cpp:
registration.cpp
	changed: 
	parsing message for user: now realname can have many names with spaces
	add correct order: PASS->NICK>USERo:
				NICK missingPass
				:ircserv 451 NICK :You have not registered
				PASS abc
				NICK aaa
				USER myuser 0 * :Real Me
				:ircserv 001 aaa :Welcome to the Internet Relay Network aaa!myuser@127.0.0.1

Branch feature/signals:

 

12.07
Branch: feature/server-channel-handling

[] colors	
	changed:
		emoji 
		added colors already + need RST only
[] 	Server:
	   add:
	   		removeChannel();
			removeClientFromAllChannels();


Branch: feature/welcome-2-cIRCus
makefile:
add:
	mesage how to start programm
main:
add:
	printWelcomeMessage()


09.07
Server:
	add:
		getChannel()
Client: 
	added:
		isInChannel()
privmsg:
	add:
		 handlePrivateMessage
Server:
	changed:
		// Alena: renamed from broadCastMessage(const std::string &message, int excludeFd) const
		//        to sendToChannelExcept(const std::string &message, const Client &clientExcluded) const
		//        for clarity+common purpose.

		//Alena: changed multiple // before function to /* blockcomment */ for more clean and readable

08.07
Branch: refactor/handle-command
handleClientInput:
	added all commands to handle for client/channel/server

Branch: "feature/privmsg-notice"

TODO:
commands;
	added numeric replies 411,412
private message:

notice:




07.07
replyRpl001Welcome
Server:
	replyRpl001Welcome
	ping-pong
add:
	handlePing()
	void sendToClient(int fd, const std::string &message);
    void sendPong(Client &client, const std::string &message);
    void sendWelcome(Client &client);
	update : void handleUser(Server &server, Client &client, const std::vector<std::string> &params)
DONE:
GIT BRANCH: "feature/ping-pong"
  - handlePing()
  - sendPong()

GIT BRANCH: "feature/welcome"  
in registration.cpp:
 add check if registered 
 add send welcome
 Client:
	added:
	std::string _host;
	getHost()
	get ip 
	21:21 -!- Unknown command: CAP
	CAP -IRC Capability Negotiation.Need ignore

	changed:
	//for welocme message:
	Client(int fd); to 
	Client(int fd, const std::string &host);
	put Client() in private. Only creating with fd and host
	
	21:21 -!- Irssi: Connection to localhost established


04.07
DONE:
	made a new folder called commands
	took all the command functions (like handlePass, handleNick, etc.) out of the big Server and Client files
	put each command into its own small .cpp files inside the commands folder
	made the project look cleaner and easier to understand
	cChanged the functions so they get the Server as input when they need it
	fixed the code so things like sendToClient and getServerName still work after moving the functions
	

03.07

Server:
	changed:
	  moved some Orthodox Canonical Form to private (Server objects are non-copyable in real-world servers)

	added:
		handleUser()
		client->setHasProvidedPass(true);
		client->setHasProvidedNick(true);
		isValidUsername()


Client:
	changed:
		removed bool _isRegistered to isRegistered() inside function
		moved  some Orthodox Canonical Form to private (Client objects are non-copyable in real-world servers)

	added:
	std::string _userModes; //for handleUser pararmeter. Dont need then to check according subject

utils.cpp/hpp 
	created and moved there :
		check pass(server and client)
		intToString()


02.07
Branch: feat/nick
SERVER:
added:
handleUser()	
	const std::string _serverName;
	isNicknameInUse()
	isValidNickname()
	broadcast after change nick to  client self and to all channles where this client is member

changed:
	moved constructors to private, because only 1 server according to subject
	made isValid password static to check also server subject
	deleted operator<<(need debug only)
	changed check arguments in main, organized

CLIENT:
const std::vector<Channel*> &getChannels() const; // Get list of channels, where this client is a member
changed std::vector<std::string> _channels;  to std::vector<Channel*> _channels; 
added:
	getChannels()
	//For correct registration steps (PASS, NICK, USER), sends welcome messages.
	bool _hasProvidedPass; + getters/setters
	bool _hasProvidedNick; + getters/setters
	bool _hasProvidedUser;+ getters/setters
	 std::string _userModes;  + getters/add
	 std::string _realname;  + getters/setters


30.06
Branch feat/nick-pass-auth
 - added replies.hpp/cpp

 run()
	-changed logic when client disconnected and error => removeClient()
	
Added in server.cpp/hpp
	-helper function for validation niick/password/channel
	-getClientByNickname
	-getChannelByName()
	- isChannelName()

WIP:
 NICK



29.06
branch server-client handling

[x] sendToClient()
 
 [x]removeClient(fd) properly. It only does:
    Close fd
    Erase from _clients
    Erase from _pollFds
	
[] Move accept() logic from run() to acceptNewClient()

[] Move read() logic from run() to handleClientInput()
[] Update run() to call these	

28.06
Branch: feat/nick-pass-auth
feat/ ‚Üí feature work
fix/ ‚Üí bugfix
test/ ‚Üí testing logic

27.06
Branch: irc-run-logic

- Input buffering per client
	read() reads available data
	appendToReceivedData() adds it to _receivedData
	While hasCompleteCommandRN() returns true
		extractNextCmd() gets full line (up to \r\n)
		handleCommand() is called with that line

- Wrote: handleCommand()
	Extract command (first word)
	Convert command to uppercase (IRC commands are not case sensitive)
	Split other words as arguments
	Call right function based on command (PASS, NICK, USER, JOIN)

- Server:
	Uncommented function definitions for:
		handlePass()
		handleNick()
		handleUser()
		handleJoin()
		handlePrivateMessage()

- Full line (\r\n) detection works
	Multiple commands handled if sent together

- Command placeholders:
	For now, PASS/NICK/USER/JOIN just reply with "received" message
	PrivateMessage not implemented yet

- Added simple sendToClient() for sending responses

- runpp updated:
	Uses -q 1 for nc so it auto-exits after sending test commands
	Server starts, accepts client, sends basic responses, exits cleanly


26.06
Channels.hpp:
[ ] Alena: replaced hardcoded color defines with colors.hpp
[ ] Alena: Commented out incomplete function to allow project to compile

		//TODO (Alena): Function definition for 'Channel' not found.
		//Channel();// Default constructor
		
		// TODO (Alena): commented out, _limit is not declared in Channel.cpp, causes error C/C++(292)
		//Channel(const std::string& name); // Constructor with channel name
		
		//TODO (Alena): Function definition for '~Channel' not found.
		//~Channel();// Destructor

[] made tmp void for compiling:

	//TODO(Alena) : made tmp void for compiling ( unused parameter 'client')
	(void)client;



Channel.cpp
[ ]//Alena: commented out, "_limit" is not a nonstatic data member or base class of class "Channel"C/C++(292)
	//constructor with channel name
	//Channel::Channel(const std::string& name) : _name(name), _limit(0) {}

[ ] // Alena: added forward declaration Client class before use it
class Client;

[] 	//TODO(Alena) : made tmp return true for compiling ( unused parameter 'client')
    return true;


[] /*
TODO(Alena): commented out, because same function line 97 -115
   79 | bool Channel::hasMembers(Client* client) const{
      |               ^
src/Channel.cpp:56:15: note: previous definition is here
   56 | bool Channel::hasMembers(Client* client) const{
      |               ^
src/Channel.cpp:89:15: error: redefinition of 'isOperator'
   89 | bool Channel::isOperator(Client* client) const {
      |               ^
src/Channel.cpp:67:15: note: previous definition is here
   67 | bool Channel::isOperator(Client* client) const {
      |               


added  git actions. 
made compiling version
changed to_string to own function